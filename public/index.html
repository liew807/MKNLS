<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPMCY - CPM账号克隆工具</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <meta name="author" content="快手Jack">
    
    <!-- 24小时免费访问 + IP限制系统样式 -->
    <style>
        /* 访问授权弹窗样式 */
        .access-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .access-box {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            text-align: center;
        }
        
        .access-box h2 {
            color: #2c3e50;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .access-box h2 i {
            color: #27ae60;
        }
        
        .access-subtitle {
            color: #7f8c8d;
            margin-bottom: 25px;
            font-size: 1.1rem;
        }
        
        .timer-display {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            font-size: 2rem;
            font-weight: bold;
            font-family: monospace;
            letter-spacing: 2px;
        }
        
        .time-label {
            font-size: 1rem;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        .free-access-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .free-access-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 25px rgba(39, 174, 96, 0.3);
        }
        
        .access-info {
            margin-top: 25px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            text-align: left;
        }
        
        .access-info h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .access-info ul {
            padding-left: 20px;
            color: #34495e;
        }
        
        .access-info li {
            margin-bottom: 8px;
            font-size: 0.95rem;
        }
        
        /* IP地址显示 */
        .ip-display {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 1.2rem;
        }
        
        .ip-label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 5px;
        }
        
        /* 剩余时间显示 */
        .time-remaining {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 999;
        }
        
        .time-remaining.active {
            color: #27ae60;
            border: 1px solid #27ae60;
        }
        
        .time-remaining.expired {
            color: #e74c3c;
            border: 1px solid #e74c3c;
        }
        
        /* IP限制警告 */
        .ip-warning {
            background: linear-gradient(135deg, #fff5f5 0%, #ffeaea 100%);
            border: 2px solid #ffcccc;
            color: #e74c3c;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
        }
        
        .ip-warning i {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        
        /* 管理后台入口 */
        .admin-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .admin-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        /* 管理后台面板 */
        .admin-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 380px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 25px rgba(0, 0, 0, 0.15);
            transition: right 0.4s ease;
            z-index: 1001;
            overflow-y: auto;
        }
        
        .admin-panel.active {
            right: 0;
        }
        
        .admin-header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-header h3 {
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .close-admin {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
        }
        
        .admin-content {
            padding: 20px;
        }
        
        .admin-section {
            margin-bottom: 25px;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
        }
        
        .admin-section h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        
        .stat-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #6a11cb;
        }
        
        .stat-label {
            font-size: 0.8rem;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        .admin-list {
            max-height: 200px;
            overflow-y: auto;
        }
        
        .admin-list-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .user-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: white;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }
        
        .user-info {
            flex: 1;
        }
        
        .user-actions button {
            padding: 5px 10px;
            margin-left: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
        }
        
        .clear-btn {
            background: #ffeaea;
            color: #e74c3c;
        }
        
        .add-extension-form {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .add-extension-form input {
            flex: 1;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
        }
        
        .add-extension-form button {
            background: #6a11cb;
            color: white;
            border: none;
            padding: 0 15px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        /* 扩展时间功能 */
        .extend-time-section {
            background: linear-gradient(135deg, #f0fff4 0%, #e8ffe8 100%);
            border: 2px solid #b6e3b6;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }
    </style>

    <!-- 以下是原有的样式保持不变 -->
    <style>
        /* 基础样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* 头部样式 */
        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header h1 i {
            color: #6a11cb;
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
            font-weight: 500;
        }

        /* 卡片样式 */
        .card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .card h2 {
            color: #34495e;
            font-size: 1.8rem;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid #ecf0f1;
        }

        .card h2 i {
            color: #6a11cb;
        }

        /* 账号信息样式 */
        .account-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .info-row {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 18px;
            border-radius: 10px;
            border-left: 4px solid #6a11cb;
        }

        .info-label {
            display: block;
            color: #7f8c8d;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .info-value {
            display: block;
            color: #2c3e50;
            font-size: 1.2rem;
            font-weight: 700;
        }

        .status-badge {
            display: inline-block;
            padding: 6px 15px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        /* 表单样式 */
        .info-text {
            color: #7f8c8d;
            margin-bottom: 20px;
            font-size: 0.95rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .form-group input {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .form-group input:focus {
            outline: none;
            border-color: #6a11cb;
            box-shadow: 0 0 0 3px rgba(106, 17, 203, 0.1);
            background: white;
        }

        /* 操作选项样式 */
        .operation-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .option-item {
            position: relative;
        }

        .option-item input[type="radio"] {
            display: none;
        }

        .option-item label {
            display: block;
            padding: 20px;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-item input[type="radio"]:checked + label {
            border-color: #6a11cb;
            background: linear-gradient(135deg, #f5f1ff 0%, #e8e0ff 100%);
            transform: scale(1.02);
        }

        .option-item label strong {
            display: block;
            color: #2c3e50;
            font-size: 1rem;
            margin-bottom: 5px;
        }

        .option-item label small {
            color: #7f8c8d;
            font-size: 0.85rem;
            line-height: 1.4;
        }

        /* 按钮样式 */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .btn i {
            font-size: 1.1rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            box-shadow: 0 8px 20px rgba(106, 17, 203, 0.2);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(106, 17, 203, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #7f8c8d 0%, #95a5a6 100%);
            color: white;
            box-shadow: 0 8px 20px rgba(127, 140, 141, 0.2);
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(127, 140, 141, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
            color: white;
            box-shadow: 0 8px 20px rgba(255, 65, 108, 0.2);
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(255, 65, 108, 0.3);
        }

        /* 警告信息样式 */
        .warning {
            background: linear-gradient(135deg, #fff5f5 0%, #ffeaea 100%);
            border: 2px solid #ffcccc;
            color: #e74c3c;
            padding: 18px;
            border-radius: 10px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .time-warning {
            background: linear-gradient(135deg, #fffaf0 0%, #fff5e6 100%);
            border: 2px solid #ffd699;
            color: #f39c12;
            padding: 18px;
            border-radius: 10px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .warning i, .time-warning i {
            font-size: 1.2rem;
        }

        /* 进度条样式 */
        .progress-container {
            background: #f0f3f5;
            border-radius: 10px;
            height: 20px;
            overflow: hidden;
            margin: 20px 0;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%);
            width: 0%;
            transition: width 0.4s ease;
            position: relative;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent 25%, 
                rgba(255, 255, 255, 0.2) 50%, 
                transparent 75%);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-text {
            text-align: center;
            margin: 10px 0;
            color: #34495e;
            font-weight: 600;
        }

        .time-estimate {
            text-align: center;
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        /* 状态日志样式 */
        .status-log {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #e0e0e0;
        }

        .log-entry {
            padding: 10px 12px;
            border-bottom: 1px solid #eee;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .log-entry i {
            color: #6a11cb;
        }

        /* 说明样式 */
        .instructions ol {
            padding-left: 20px;
            margin-bottom: 20px;
        }

        .instructions li {
            margin-bottom: 12px;
            color: #2c3e50;
        }

        .instructions li b {
            color: #6a11cb;
        }

        .note {
            background: linear-gradient(135deg, #f0fff4 0%, #e8ffe8 100%);
            border: 2px solid #b6e3b6;
            color: #27ae60;
            padding: 18px;
            border-radius: 10px;
            margin: 15px 0;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .note i {
            color: #2ecc71;
        }

        .author-info {
            background: linear-gradient(135deg, #f9f0ff 0%, #f0e6ff 100%);
            border: 2px solid #d9c9f9;
            color: #8e44ad;
            padding: 18px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
            margin-top: 20px;
        }

        .author-info i {
            color: #9b59b6;
        }

        /* 页脚样式 */
        .footer {
            text-align: center;
            color: white;
            padding: 25px 0;
            margin-top: 30px;
        }

        .footer p {
            margin-bottom: 8px;
            opacity: 0.9;
        }

        .disclaimer {
            font-size: 0.85rem;
            opacity: 0.7;
            max-width: 800px;
            margin: 0 auto;
        }

        /* 状态消息样式 */
        .status {
            padding: 12px 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-weight: 500;
        }

        /* 工具类 */
        .hidden {
            display: none !important;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
                flex-direction: column;
                gap: 10px;
            }
            
            .card {
                padding: 20px;
            }
            
            .card h2 {
                font-size: 1.5rem;
            }
            
            .account-details {
                grid-template-columns: 1fr;
            }
            
            .operation-options {
                grid-template-columns: 1fr;
            }
            
            .btn {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 20px;
            }
            
            .card {
                padding: 18px;
            }
            
            .info-value {
                font-size: 1.1rem;
            }
        }
    </style>
</head>

<body>
    <!-- 免费访问授权弹窗 -->
    <div class="access-modal" id="access-modal">
        <div class="access-box">
            <h2><i class="fas fa-unlock-alt"></i> 免费访问授权</h2>
            <p class="access-subtitle">每个IP地址24小时免费使用权</p>
            
            <div class="ip-display">
                <div class="ip-label">您的IP地址</div>
                <div id="user-ip">正在获取...</div>
            </div>
            
            <div class="timer-display">
                <div id="remaining-time">24:00:00</div>
                <div class="time-label">剩余使用时间</div>
            </div>
            
            <button class="free-access-btn" id="start-access-btn">
                <i class="fas fa-play-circle"></i> 开始24小时免费使用
            </button>
            
            <div class="access-info">
                <h4><i class="fas fa-info-circle"></i> 使用规则说明</h4>
                <ul>
                    <li>每个IP地址享有<strong>24小时免费使用权</strong></li>
                    <li>时间到期后需要重新获取访问权限</li>
                    <li>同一IP地址不能多设备共享使用</li>
                    <li>请勿尝试更换IP地址绕过限制</li>
                    <li>使用过程中请勿关闭浏览器</li>
                </ul>
            </div>
            
            <div id="ip-warning" class="ip-warning hidden">
                <i class="fas fa-exclamation-triangle"></i>
                <h3>IP地址已使用</h3>
                <p>您的IP地址已在其他设备上使用，请使用原设备访问或联系管理员。</p>
            </div>
        </div>
    </div>

    <!-- 剩余时间显示 -->
    <div class="time-remaining hidden" id="time-remaining">
        <i class="fas fa-clock"></i> <span id="time-remaining-text">--</span>
    </div>

    <!-- 管理后台入口 -->
    <div class="admin-btn hidden" id="admin-btn">
        <i class="fas fa-cog"></i>
    </div>

    <!-- 管理后台面板 -->
    <div class="admin-panel" id="admin-panel">
        <div class="admin-header">
            <h3><i class="fas fa-tachometer-alt"></i> 访问管理系统</h3>
            <button class="close-admin" id="close-admin">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="admin-content">
            <div class="admin-section">
                <h4>系统统计</h4>
                <div class="admin-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="total-users">0</div>
                        <div class="stat-label">总用户数</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="active-users">0</div>
                        <div class="stat-label">活跃用户</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="blocked-ips">0</div>
                        <div class="stat-label">受限IP</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="today-access">0</div>
                        <div class="stat-label">今日访问</div>
                    </div>
                </div>
            </div>
            
            <div class="admin-section">
                <h4>用户IP管理</h4>
                <div id="users-list">
                    <!-- 用户列表会动态生成 -->
                </div>
                
                <div class="add-extension-form">
                    <input type="text" id="extend-ip" placeholder="输入要延长的IP地址">
                    <input type="number" id="extend-hours" placeholder="小时数" min="1" max="720" value="24">
                    <button id="extend-time-btn">延长</button>
                </div>
            </div>
            
            <div class="admin-section">
                <h4>访问记录</h4>
                <div class="admin-list" id="access-log">
                    <!-- 访问记录会动态生成 -->
                </div>
            </div>
            
            <div class="admin-section">
                <h4>系统管理</h4>
                <button id="clear-all-btn" class="btn btn-secondary" style="width: 100%;">
                    <i class="fas fa-trash"></i> 清空所有数据
                </button>
                <button id="export-data-btn" class="btn btn-primary" style="width: 100%; margin-top: 10px;">
                    <i class="fas fa-download"></i> 导出数据
                </button>
            </div>
        </div>
    </div>

    <!-- 以下是原有HTML代码保持不变 -->
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-user-shield"></i> CPMCY- CPM账号数据克隆工具</h1>
            <p class="subtitle">快手Jack制作 | 克隆CPM账号数据到其他账号</p>
        </header>

        <!-- 账号信息展示区 -->
        <div class="card hidden" id="account-info-section">
            <h2><i class="fas fa-user-circle"></i> 当前账号信息</h2>
            <div class="account-details">
                <div class="info-row">
                    <span class="info-label">账号昵称:</span>
                    <span class="info-value" id="account-name">--</span>
                </div>
                <div class="info-row">
                    <span class="info-label">游戏金币:</span>
                    <span class="info-value" id="account-money">--</span>
                </div>
                <div class="info-row">
                    <span class="info-label">车辆数量:</span>
                    <span class="info-value" id="account-cars">--</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Local ID:</span>
                    <span class="info-value" id="account-localid">--</span>
                </div>
                <div class="info-row">
                    <span class="info-label">账号状态:</span>
                    <span class="info-value status-badge" id="account-status">未登录</span>
                </div>
            </div>
            <button id="logout-btn" class="btn btn-secondary">
                <i class="fas fa-sign-out-alt"></i> 退出登录
            </button>
        </div>

        <!-- 登录部分 -->
        <div class="card" id="login-section">
            <h2><i class="fas fa-sign-in-alt"></i> 第一步：源账号登录</h2>
            <p class="info-text">请登录要被克隆的源账号（你的主账号）</p>
            <div class="form-group">
                <label for="source-email">邮箱地址</label>
                <input type="email" id="source-email" placeholder="输入CPM账号邮箱" required>
            </div>
            <div class="form-group">
                <label for="source-password">密码</label>
                <input type="password" id="source-password" placeholder="输入CPM账号密码" required>
            </div>
            <button id="login-btn" class="btn btn-primary">
                <i class="fas fa-key"></i> 登录并验证账号
            </button>
            <div id="login-status" class="status"></div>
        </div>

        <!-- 克隆部分 -->
        <div class="card hidden" id="clone-section">
            <h2><i class="fas fa-clone"></i> 第二步：选择操作类型</h2>
            
            <!-- 新增：操作类型选择 -->
            <div class="form-group">
                <label for="operation-type">选择操作类型</label>
                <div class="operation-options">
                    <div class="option-item">
                        <input type="radio" id="op-type1" name="operation-type" value="modify-id" checked>
                        <label for="op-type1">
                            <strong>选项1：修改当前账号ID</strong><br>
                            <small>仅修改当前登录账号的Local ID，其他数据不变</small>
                        </label>
                    </div>
                    <div class="option-item">
                        <input type="radio" id="op-type2" name="operation-type" value="clone-to-new">
                        <label for="op-type2">
                            <strong>选项2：克隆到新账号</strong><br>
                            <small>复制当前账号所有数据到另一个账号（覆盖目标账号）</small>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- 自定义Local ID输入框 -->
            <div class="form-group" id="custom-id-group">
                <label for="custom-localid">自定义新的Local ID</label>
                <input type="text" id="custom-localid" placeholder="输入新的Local ID（字母数字，建议10-20位）" required>
            </div>
            
            <!-- 目标账号凭据部分（只在选项2时显示） -->
            <div id="target-credentials" class="hidden">
                <div class="form-group">
                    <label for="target-email">目标账号邮箱</label>
                    <input type="email" id="target-email" placeholder="输入目标账号邮箱">
                </div>
                <div class="form-group">
                    <label for="target-password">目标账号密码</label>
                    <input type="password" id="target-password" placeholder="输入目标账号密码">
                </div>
            </div>
            
            <div class="warning">
                <i class="fas fa-exclamation-triangle"></i>
                <strong>警告：</strong> 这将覆盖目标账号的所有数据！请谨慎操作！
            </div>
            
            <div class="time-warning">
                <i class="fas fa-clock"></i>
                <strong>注意：</strong> 克隆过程可能需要2-5分钟，请勿关闭页面！
            </div>
            
            <button id="clone-btn" class="btn btn-danger">
                <i class="fas fa-clone"></i> 开始执行
            </button>
            <div id="clone-status" class="status"></div>
        </div>

        <!-- 状态显示部分 -->
        <div class="card" id="status-section">
            <h2><i class="fas fa-info-circle"></i> 克隆进度状态</h2>
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
                <div class="progress-text" id="progress-text">准备开始...</div>
            </div>
            <div class="time-estimate" id="time-estimate">预计时间: --</div>
            <div class="status-log" id="status-log">
                <div class="log-entry"><i class="fas fa-info-circle"></i> 系统已就绪，请先登录源账号</div>
            </div>
        </div>

        <!-- 使用说明 -->
        <div class="card instructions">
            <h2><i class="fas fa-question-circle"></i> 使用说明</h2>
            <ol>
                <li>使用<b>源账号</b>（你要克隆的主账号）登录</li>
                <li>系统会显示账号的详细信息</li>
                <li>选择操作类型：修改当前账号ID 或 克隆到新账号</li>
                <li>输入自定义Local ID</li>
                <li>如选择克隆到新账号，输入目标账号凭据</li>
                <li><b>重要：</b>克隆过程中不要关闭浏览器！</li>
            </ol>
            <p class="note"><i class="fas fa-lightbulb"></i> <strong>提示：</strong> 克隆时间取决于车辆数量，通常需要2-5分钟。</p>
            <div class="author-info">
                <i class="fas fa-user-tie"></i> 开发者：快手Jack
            </div>
        </div>

        <footer class="footer">
            <p>CPMCY 账号克隆工具 v2.2 | 快手Jack制作</p>
            <p class="disclaimer">仅供学习交流使用，请勿用于非法用途。使用本工具造成的任何问题，作者概不负责。</p>
        </footer>
    </div>

    <!-- JavaScript代码 -->
    <script>
        // IP限制的24小时免费访问系统
        const IP_ACCESS_SYSTEM = {
            // 存储结构
            users: {}, // key: ip, value: { expiry: timestamp, firstAccess: timestamp, lastAccess: timestamp, usageCount: number }
            accessLogs: [],
            blockedIPs: [],
            adminPassword: 'admin123',
            
            // 初始化
            init() {
                this.loadFromStorage();
                this.getUserIP().then(ip => {
                    this.currentIP = ip;
                    this.displayUserIP(ip);
                    this.checkAccessStatus();
                });
                this.bindEvents();
                this.startTimer();
            },
            
            // 获取用户IP地址
            async getUserIP() {
                try {
                    // 尝试从ipify获取IP
                    const response = await fetch('https://api.ipify.org?format=json');
                    const data = await response.json();
                    return data.ip;
                } catch (error) {
                    try {
                        // 备用API
                        const response = await fetch('https://api64.ipify.org?format=json');
                        const data = await response.json();
                        return data.ip;
                    } catch (error2) {
                        // 如果API都失败，使用本地生成的伪IP
                        return this.generateFakeIP();
                    }
                }
            },
            
            // 生成伪IP（当API失败时使用）
            generateFakeIP() {
                const storedIP = localStorage.getItem('cpmcy_fake_ip');
                if (storedIP) return storedIP;
                
                const fakeIP = `192.168.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`;
                localStorage.setItem('cpmcy_fake_ip', fakeIP);
                return fakeIP;
            },
            
            // 显示用户IP
            displayUserIP(ip) {
                document.getElementById('user-ip').textContent = ip;
            },
            
            // 检查访问状态
            checkAccessStatus() {
                const userData = this.users[this.currentIP];
                const now = Date.now();
                
                // 检查是否被阻止
                if (this.blockedIPs.includes(this.currentIP)) {
                    this.showIPWarning();
                    return;
                }
                
                // 检查是否有有效访问权限
                if (userData && userData.expiry > now) {
                    // 用户有有效访问权限
                    const remainingTime = Math.floor((userData.expiry - now) / 1000);
                    this.updateRemainingTime(remainingTime);
                    this.hideAccessModal();
                    this.showTimeRemaining();
                    this.recordAccess();
                    return;
                }
                
                // 没有访问权限，显示授权弹窗
                this.showAccessModal();
            },
            
            // 显示IP警告
            showIPWarning() {
                document.getElementById('ip-warning').classList.remove('hidden');
                document.getElementById('start-access-btn').disabled = true;
                document.getElementById('start-access-btn').style.opacity = '0.5';
                document.getElementById('start-access-btn').innerHTML = '<i class="fas fa-ban"></i> IP地址已被限制';
            },
            
            // 显示访问弹窗
            showAccessModal() {
                document.getElementById('access-modal').style.display = 'flex';
                document.getElementById('time-remaining').classList.add('hidden');
            },
            
            // 隐藏访问弹窗
            hideAccessModal() {
                document.getElementById('access-modal').style.display = 'none';
            },
            
            // 开始24小时访问
            startAccess() {
                const now = Date.now();
                const expiry = now + (24 * 60 * 60 * 1000); // 24小时后
                
                // 保存用户数据
                this.users[this.currentIP] = {
                    expiry: expiry,
                    firstAccess: now,
                    lastAccess: now,
                    usageCount: 0
                };
                
                // 记录访问
                this.recordAccess();
                
                // 保存到本地存储
                this.saveToStorage();
                
                // 更新UI
                this.hideAccessModal();
                this.showTimeRemaining();
                this.updateRemainingTime(24 * 60 * 60);
                
                // 启用主界面
                this.enableMainInterface();
            },
            
            // 记录访问
            recordAccess() {
                const now = Date.now();
                const userData = this.users[this.currentIP];
                
                if (userData) {
                    userData.lastAccess = now;
                    userData.usageCount = (userData.usageCount || 0) + 1;
                }
                
                // 添加访问日志
                const logEntry = {
                    ip: this.currentIP,
                    timestamp: now,
                    date: new Date(now).toLocaleDateString('zh-CN'),
                    time: new Date(now).toLocaleTimeString('zh-CN')
                };
                
                this.accessLogs.unshift(logEntry);
                
                // 只保留最近100条日志
                if (this.accessLogs.length > 100) {
                    this.accessLogs = this.accessLogs.slice(0, 100);
                }
                
                // 更新管理后台
                this.updateAdminStats();
                this.updateAccessLog();
            },
            
            // 更新剩余时间显示
            updateRemainingTime(seconds) {
                const hours = Math.floor(seconds / 3600);
                const minutes = Math.floor((seconds % 3600) / 60);
                const secs = seconds % 60;
                
                const timeString = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                
                // 更新弹窗中的时间
                document.getElementById('remaining-time').textContent = timeString;
                
                // 更新右上角的时间
                document.getElementById('time-remaining-text').textContent = `剩余: ${timeString}`;
                
                // 根据剩余时间更新样式
                const timeElement = document.getElementById('time-remaining');
                if (seconds < 3600) { // 小于1小时
                    timeElement.classList.add('expired');
                    timeElement.classList.remove('active');
                } else {
                    timeElement.classList.add('active');
                    timeElement.classList.remove('expired');
                }
            },
            
            // 显示剩余时间
            showTimeRemaining() {
                document.getElementById('time-remaining').classList.remove('hidden');
            },
            
            // 启用主界面
            enableMainInterface() {
                console.log('主界面已启用');
                // 这里可以添加启用主界面功能的代码
            },
            
            // 绑定事件
            bindEvents() {
                // 开始访问按钮
                document.getElementById('start-access-btn').addEventListener('click', () => {
                    this.startAccess();
                });
                
                // 管理后台按钮
                document.getElementById('admin-btn').addEventListener('click', () => {
                    this.showAdminPanel();
                });
                
                // 关闭管理后台
                document.getElementById('close-admin').addEventListener('click', () => {
                    this.hideAdminPanel();
                });
                
                // 延长使用时间
                document.getElementById('extend-time-btn').addEventListener('click', () => {
                    this.extendAccessTime();
                });
                
                // 清空所有数据
                document.getElementById('clear-all-btn').addEventListener('click', () => {
                    if (confirm('确定要清空所有数据吗？这将重置所有用户访问记录。')) {
                        this.clearAllData();
                    }
                });
                
                // 导出数据
                document.getElementById('export-data-btn').addEventListener('click', () => {
                    this.exportData();
                });
                
                // 操作类型变化事件
                document.querySelectorAll('input[name="operation-type"]').forEach(radio => {
                    radio.addEventListener('change', (e) => {
                        const targetCreds = document.getElementById('target-credentials');
                        if (e.target.value === 'clone-to-new') {
                            targetCreds.classList.remove('hidden');
                        } else {
                            targetCreds.classList.add('hidden');
                        }
                    });
                });
            },
            
            // 定时器
            startTimer() {
                setInterval(() => {
                    const userData = this.users[this.currentIP];
                    if (userData) {
                        const now = Date.now();
                        const remainingSeconds = Math.floor((userData.expiry - now) / 1000);
                        
                        if (remainingSeconds > 0) {
                            this.updateRemainingTime(remainingSeconds);
                        } else {
                            // 时间到期
                            this.showAccessModal();
                            document.getElementById('time-remaining').classList.add('hidden');
                        }
                    }
                }, 1000);
            },
            
            // 显示管理后台
            showAdminPanel() {
                // 检查管理员权限
                const adminPass = prompt('请输入管理密码:');
                if (adminPass !== this.adminPassword) {
                    alert('密码错误！');
                    return;
                }
                
                localStorage.setItem('cpmcy_admin', 'true');
                document.getElementById('admin-btn').classList.remove('hidden');
                document.getElementById('admin-panel').classList.add('active');
                this.updateAdminPanel();
            },
            
            // 隐藏管理后台
            hideAdminPanel() {
                document.getElementById('admin-panel').classList.remove('active');
            },
            
            // 更新管理后台面板
            updateAdminPanel() {
                this.updateAdminStats();
                this.updateUsersList();
                this.updateAccessLog();
            },
            
            // 更新统计信息
            updateAdminStats() {
                // 总用户数（不同IP数）
                const totalUsers = Object.keys(this.users).length;
                document.getElementById('total-users').textContent = totalUsers;
                
                // 活跃用户（24小时内访问的）
                const now = Date.now();
                const activeUsers = Object.values(this.users).filter(user => 
                    user.expiry > now
                ).length;
                document.getElementById('active-users').textContent = activeUsers;
                
                // 被阻止的IP数
                document.getElementById('blocked-ips').textContent = this.blockedIPs.length;
                
                // 今日访问次数
                const today = new Date().toLocaleDateString('zh-CN');
                const todayAccess = this.accessLogs.filter(log => log.date === today).length;
                document.getElementById('today-access').textContent = todayAccess;
            },
            
            // 更新用户列表
            updateUsersList() {
                const usersList = document.getElementById('users-list');
                usersList.innerHTML = '';
                
                Object.entries(this.users).forEach(([ip, data]) => {
                    const now = Date.now();
                    const isActive = data.expiry > now;
                    const remainingHours = Math.floor((data.expiry - now) / (1000 * 60 * 60));
                    
                    const userItem = document.createElement('div');
                    userItem.className = 'user-item';
                    userItem.innerHTML = `
                        <div class="user-info">
                            <strong>${ip}</strong>
                            <div style="font-size: 0.8rem; color: #7f8c8d;">
                                ${isActive ? 
                                    `<span style="color: #27ae60;">剩余 ${remainingHours} 小时</span>` : 
                                    `<span style="color: #e74c3c;">已过期</span>`}
                                | 使用 ${data.usageCount || 0} 次
                            </div>
                        </div>
                        <div class="user-actions">
                            <button class="clear-btn" onclick="IP_ACCESS_SYSTEM.removeUser('${ip}')">
                                <i class="fas fa-trash"></i> 移除
                            </button>
                            ${isActive ? '' : 
                                `<button style="background: #e8f4fc; color: #3498db;" onclick="IP_ACCESS_SYSTEM.extendUserTime('${ip}', 24)">
                                    <i class="fas fa-plus"></i> 激活
                                </button>`}
                        </div>
                    `;
                    usersList.appendChild(userItem);
                });
                
                if (Object.keys(this.users).length === 0) {
                    usersList.innerHTML = '<div style="padding: 20px; text-align: center; color: #7f8c8d;">暂无用户数据</div>';
                }
            },
            
            // 移除用户
            removeUser(ip) {
                if (confirm(`确定要移除用户 ${ip} 吗？`)) {
                    delete this.users[ip];
                    this.saveToStorage();
                    this.updateUsersList();
                    this.updateAdminStats();
                }
            },
            
            // 延长用户时间
            extendUserTime(ip, hours = 24) {
                const userData = this.users[ip];
                const now = Date.now();
                
                if (!userData) {
                    this.users[ip] = {
                        expiry: now + (hours * 60 * 60 * 1000),
                        firstAccess: now,
                        lastAccess: now,
                        usageCount: 0
                    };
                } else {
                    userData.expiry = Math.max(userData.expiry, now) + (hours * 60 * 60 * 1000);
                }
                
                this.saveToStorage();
                this.updateUsersList();
                this.updateAdminStats();
                alert(`已为用户 ${ip} 延长 ${hours} 小时使用时间`);
            },
            
            // 延长访问时间（从输入框）
            extendAccessTime() {
                const ip = document.getElementById('extend-ip').value.trim();
                const hours = parseInt(document.getElementById('extend-hours').value) || 24;
                
                if (!ip) {
                    alert('请输入IP地址');
                    return;
                }
                
                this.extendUserTime(ip, hours);
                document.getElementById('extend-ip').value = '';
            },
            
            // 更新访问日志
            updateAccessLog() {
                const accessLog = document.getElementById('access-log');
                accessLog.innerHTML = '';
                
                // 只显示最近20条记录
                const recentLogs = this.accessLogs.slice(0, 20);
                
                recentLogs.forEach(log => {
                    const logItem = document.createElement('div');
                    logItem.className = 'admin-list-item';
                    logItem.innerHTML = `
                        <div>
                            <div style="font-weight: bold;">${log.ip}</div>
                            <div style="font-size: 0.8rem; color: #7f8c8d;">${log.date} ${log.time}</div>
                        </div>
                    `;
                    accessLog.appendChild(logItem);
                });
                
                if (recentLogs.length === 0) {
                    accessLog.innerHTML = '<div style="padding: 20px; text-align: center; color: #7f8c8d;">暂无访问记录</div>';
                }
            },
            
            // 清空所有数据
            clearAllData() {
                this.users = {};
                this.accessLogs = [];
                this.blockedIPs = [];
                this.saveToStorage();
                this.updateAdminPanel();
                alert('所有数据已清空！');
            },
            
            // 导出数据
            exportData() {
                const data = {
                    users: this.users,
                    accessLogs: this.accessLogs,
                    blockedIPs: this.blockedIPs,
                    exportDate: new Date().toISOString()
                };
                
                const dataStr = JSON.stringify(data, null, 2);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});
                const url = URL.createObjectURL(dataBlob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `cpmcy_access_data_${new Date().toISOString().slice(0, 10)}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            },
            
            // 保存到本地存储
            saveToStorage() {
                try {
                    localStorage.setItem('cpmcy_users', JSON.stringify(this.users));
                    localStorage.setItem('cpmcy_access_logs', JSON.stringify(this.accessLogs));
                    localStorage.setItem('cpmcy_blocked_ips', JSON.stringify(this.blockedIPs));
                } catch (e) {
                    console.error('保存数据失败:', e);
                }
            },
            
            // 从本地存储加载
            loadFromStorage() {
                try {
                    const savedUsers = localStorage.getItem('cpmcy_users');
                    const savedLogs = localStorage.getItem('cpmcy_access_logs');
                    const savedBlocked = localStorage.getItem('cpmcy_blocked_ips');
                    
                    if (savedUsers) {
                        this.users = JSON.parse(savedUsers);
                    }
                    
                    if (savedLogs) {
                        this.accessLogs = JSON.parse(savedLogs);
                    }
                    
                    if (savedBlocked) {
                        this.blockedIPs = JSON.parse(savedBlocked);
                    }
                    
                    // 清理过期数据
                    this.cleanupExpiredData();
                } catch (e) {
                    console.error('加载数据失败:', e);
                }
            },
            
            // 清理过期数据
            cleanupExpiredData() {
                const now = Date.now();
                const expiredIPs = [];
                
                Object.entries(this.users).forEach(([ip, data]) => {
                    // 删除超过30天的过期数据
                    if (data.expiry < now - (30 * 24 * 60 * 60 * 1000)) {
                        expiredIPs.push(ip);
                    }
                });
                
                expiredIPs.forEach(ip => {
                    delete this.users[ip];
                });
                
                // 清理超过100条的访问日志
                if (this.accessLogs.length > 100) {
                    this.accessLogs = this.accessLogs.slice(0, 100);
                }
            }
        };
        
        // 初始化访问系统
        document.addEventListener('DOMContentLoaded', () => {
            IP_ACCESS_SYSTEM.init();
            
            // 检查是否已经是管理员
            if (localStorage.getItem('cpmcy_admin') === 'true') {
                document.getElementById('admin-btn').classList.remove('hidden');
            }
        });
    </script>

    <!-- 原有的app.js引用 -->
    <script src="app.js"></script>
</body>
</html>
